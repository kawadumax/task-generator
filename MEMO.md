# TODO

- [x] pdf コンテンツを作成

  - [x] A4 のサイズを調べる
  - [x] フォントを導入する
  - [x] 前文を作る
  - [x] 表を作る

- [x] データジェネレータ作成
- [ ] 不正なデータの入っているモードを作成する
- [ ] データの文字数をカウントするとき、全角文字を 2 文字、半角文字を 1 字でカウントしたい。

  - kanarir が使えそう https://github.com/sam-osamu/kanaria

- [ ] エラーをちゃんと処理する
- [ ] モード作成
  - [ ] モードコントローラーを作りたい
- [ ] GUI をつけたい
- [x] フォントを静的ファイルとしてバイナリに埋め込みたい
- [x] リリースビルドでは pdf を削除しないようにしたい
- [ ] github でリリースしたい
  - [ ] リリースのためのフォルダを分けたい
  - [ ] ビルドフォルダにリードミーと pdf フォルダを作りたい
  - [ ] 配布に問題がないかを調べる。特にフォント。
    - [ ] IPA の著作権表示を同梱する
    - [ ] HONOKA プロジェクトと IPA の権利表示を行う

# モード案

- 間違いを含んだバージョン
- 封入作業
- 封入作業の間違いを含んだもの
- タイピング練習

# MEMO

## 紙面の大きさと位置について

A4 の大きさは
210 mm × 297 mm
オリジンは左下

## フォントサイズについて

font_size は f64 で、Mm も Pt も f64。
Mm と Pt はそれぞれ From と Into を実装してる

うーんテキストレイアウトには
`https://docs.rs/azul-text-layout/0.0.4/azul_text_layout/`
を使えと作者が言っていた。なんかだるいな。

## 構造のフィールドの mutability について

Rust では親がミュータブルなら子もミュータブルになる。イミュータブルもそう。
なので子の一部分のフィールドだけ mutable にしたいだけなのに親も mutable にしないといけない。
こういう時は Cell/RefCell を使えばフィールド単位の Mutability を実現できる。

## ホノカフォントの配布について

IPA フォントライセンスの元で再配布可
添付と著作権表示と謝辞を書こう。

## 動的ディスパッチについて

Box<dyn Trait>を使うことで、DI みたいな感じで切り替えることに成功した。
トレイトオブジェクトは、型同士の差異を吸収する。
でも、トレイトオブジェクトからは self を取得するメソッドを生やせない。

そういうときには 関数のシグネチャを

```
fn finish(self: Box<Self>);
```

のようにしたらいいらしい。ほんまか？
で、動的ディスパッチよりも enum で管理したほうが早いしいろいろ便利らしい。
でも enum だとボイラープレートが多くなるので、そういう時は ↓
enum_dipatch を使えば幸せになれる。
https://docs.rs/enum_dispatch/0.3.3/enum_dispatch/
